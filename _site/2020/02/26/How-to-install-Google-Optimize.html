<p>In this post I describe how I installed Google Optimize on my Minimal Mistakes website so that I can run A/B tests.</p>

<h3 id="1-register-with-google-optimize">1. Register with <a href="http://optimize.google.com/">Google Optimize</a></h3>
<p>and create a container which will hold all the Optimize configurations for your A/B tests. You get a container ID that starts with “GTM-“ that will be added to a JavaScript snippet in the next step.</p>
<figure class="">
  <img src="/assets/images/posts/Google-Optimize-installation.jpg" alt="Google Optimize Installation" />
  </figure>

<p> </p>
<h3 id="2-install-optimize-on-your-website">2. Install Optimize on your website</h3>

<p>I used the global side tag (gtag.js) since Minimal Mistakes Jekyll theme already has this capability.</p>

<p>First, I had to enable google-gtag as provider in <code class="language-plaintext highlighter-rouge">_config.yml</code> and added <code class="language-plaintext highlighter-rouge">optimize_id</code> with my ‘GTM-‘ number. After these changes  <code class="language-plaintext highlighter-rouge">_config.yml</code>  should look like this (tracking_ids and optimized_ids were anonymized here):</p>

<div class="language-yml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="c1"># Analytics</span>
  <span class="na">analytics</span><span class="pi">:</span>
    <span class="na">provider               </span><span class="pi">:</span> <span class="s">google-gtag</span> <span class="c1"># false (default), "google", "google-universal", "custom"</span>
    <span class="na">google</span><span class="pi">:</span>
      <span class="na">tracking_id          </span><span class="pi">:</span> <span class="s">UA-xxxxxxxxx-1</span>
      <span class="na">anonymize_ip         </span><span class="pi">:</span> <span class="no">true</span> <span class="c1"># false (default)</span>
      <span class="na">optimize_id          </span><span class="pi">:</span> <span class="s">GTM-xxxxxxx</span>
</code></pre></div></div>

<p class="notice--info text-justify"><i class="far fa-sticky-note"></i> <strong>Note:</strong> Developers of Minimal Mistakes Jekyll theme forgot to list google-gtag as an option in <code class="language-plaintext highlighter-rouge">_config.yml</code>. However, we actually have it among analytics-providers in <code class="language-plaintext highlighter-rouge">google-gtag.html</code></p>

<p>Then I went to <code class="language-plaintext highlighter-rouge">google-gtag.html</code> and modified the script to include the reference to <code class="language-plaintext highlighter-rouge">optimize_id</code> like so:</p>

<figure class="">
  <img src="/assets/images/posts/Google-Optimize-gtag-script.jpg" alt="Google Optimize gtag Script for Minimal Mistakes Jekyll site" />
  </figure>

<p>Finally, I git commit all the changes and pushed them to my GitHub.</p>

<h3 id="3-check-if-optimize-was-installed-correctly">3. Check if Optimize was installed correctly</h3>

<p>For this I installed <a href="https://chrome.google.com/webstore/detail/google-optimizer-extensio/bhdplaindhdkiflmbfbciehdccfhegci">Optimize Chrome extension</a> and then clicked on “Run diagnostics” which is available after you create your first experiment (more on that in another post).</p>

<figure class="">
  <img src="/assets/images/posts/Google-Optimize-installation-check.png" alt="Google Optimize Installation Checker" />
  </figure>

<p class="notice--info text-justify"><i class="far fa-sticky-note"></i> <strong>Note:</strong> I couldn’t get Optimize installed correctly on the first try. So emptying cache was helpful. You can do it in Chrome by pressing longer the Reload button but only if you are in Developer mode (!). Then a window pops up with Empty Cache option.</p>

<figure class="">
  <img src="/assets/images/posts/Google-Optimize-empty-cache-in-Chrome.png" alt="How to empty cache in Chrome" />
  </figure>

<p>If you still don’t get it right, check in Web Inspector or Developer Tools which javascript is activated. You might still get redirected to <code class="language-plaintext highlighter-rouge">google.html</code> with activates <code class="language-plaintext highlighter-rouge">.google-analytics.com/ga.js</code>, which is wrong because we want <code class="language-plaintext highlighter-rouge">google-gtag.html</code> instead.</p>

<p>After few trials and errors, I finally got Optimize correctly installed! Now I can start a new A/B test to try a different version of my website.</p>

<p>I hope this post was helpful, thumbs up below if you liked it!</p>
